<h2>Manage Orders</h2>

<div *ngIf="loading">Loading orders...</div>
<div *ngIf="error">{{ error }}</div>

<table *ngIf="!loading && (orders?.length || 0) > 0" class="order-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>User</th>
      <th>Total</th>
      <th>Status</th>
      <th>Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let order of orders">
      <td>{{ order.id }}</td>
      <td>{{ order.user?.firstName || 'N/A' }}</td>
      <td>{{ order.totalAmount | currency }}</td>
      <td>{{ order.status }}</td>
      <td>{{ order.orderDate | date: 'short' }}</td>
      <td>
        <select [(ngModel)]="order.status" (change)="updateOrderStatus(order.id, order.status)">
          <option *ngFor="let s of statuses" [value]="s">{{ s }}</option>
        </select>
        <button (click)="deleteOrder(order.id)" title="Delete Order">🗑️</button>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="!loading && orders.length === 0">
  No orders found.
</div>
